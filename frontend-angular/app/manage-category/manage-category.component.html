
<input type="hidden"  [(ngModel)]="userId" name="userId" />

<!-- Button trigger modal -->
 <div class="container  d-flex justify-content-between align-items-center">
    <h4> Manage Category</h4>
  <button type="button" class="btn btn-primary" (click)="openCategoryModal()">Add Category </button>
</div>

<div class="container mt-3">
  <input type="text" class="form-control" id="searchInput" placeholder="Search..." [(ngModel)] = "searchTerm" (keyup)="searchCategory();">
</div>


<div class="conatiner">
  <table class="table">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let category of categoryList">
      <th>{{category.name}}</th>
      <td>
        <i class="fas fa-pen text-primary"  (click)="openEditCategoryModal(category)"></i>
        <i class="fa-solid fa-trash text-danger ml-3"  (click)="deleteCategory(category.id!)"></i>
      </td>
    </tr>
  </tbody>
</table>
</div>


<nav aria-label="Page navigation">
  <ul class="pagination">
    <li class="page-item">
      <a class="page-link" (click)="getCategory(currentPage - 1)">Previous</a>
    </li>

    <li *ngFor="let page of [].constructor(totalPages); let i = index"
        class="page-item" [class.active]="i === currentPage">
      <a class="page-link"  (click)="getCategory(i)">{{ i + 1 }}</a>
    </li>

    <li class="page-item" [class.disabled]="currentPage === totalPages - 1">
      <a class="page-link" (click)="getCategory(currentPage + 1)">Next</a>
    </li>
  </ul>
</nav>


<!-- Modal -->
<div class="modal" *ngIf="isCategoryModal" style="display:block">
  <div class="modal-dialog modal-dialog-centered custom-modal-width">
    <form  (ngSubmit)="addCategory();" action="" method="post" >
      <div class="modal-content" style="width: 400px;">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Add Category</h5>
          <button type="button" class="close" (click)="closeCategoryModal()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <input type="text" name="category" class="form-control" placeholder="Add Category" [(ngModel)]="category.name">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeCategoryModal()" >Close</button>
          <input type="submit"   name="btn" value="Add Category" class="btn btn-primary">
        </div>
      </div>
    </form>
  </div>
</div>


<!-- Modal -->
<div class="modal" id="editCategoryModal"  *ngIf="isEditCategoryModal" style="display: block;">
  <div class="modal-dialog">
    <form  (ngSubmit)="updateCategory(userId)" action="" method="post" >
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Edit Category</h5>
          <button type="button" class="close" (click)="closeEditCategoryModal()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <input type="text" name="category" class="form-control" placeholder="Edit Category" [(ngModel)]="category.name">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeEditCategoryModal()">Close</button>
          <input type="submit"   name="btn" value="Edit Category" class="btn btn-primary">
        </div>
      </div>
    </form>
  </div>
</div>
